<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>nds planner</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<style>
		body {
			font-family: Tahoma;
			/*text-align: center;*/
		}
		#container {
			margin: auto;
			vertical-align: middle;
			width: fit-content;
		}
		#form {
			width: fit-content;
			margin: auto;
		}
		button {
			font-size: large;
			width: 40%;
		}
		#ans {
			text-align: center;
		}
	</style>
</head>
<body>
	<div id='container'>
		<h3>instructions</h3>
		<p>
		1. choose a series of waypoints connected by <b>straight-line</b> paths<br>
		2. for each pair of waypoints, A and B, where the intent is to traverse from A to B,<br> measure and enter the respective MGRs<br>
		3. round off however you like :)
		</p>
		<br>
		<div id='form'>
			<form action='javascript:readForm()'>
				<h4>point A</h4>
				<div>
					<label for='ea'>easting</label>
					<input type='text' id='ea', name='ea'>
				</div>
				<div>
					<label for='na'>northing</label>
					<input type='text' id='na', name='na'>
				</div>
				<h4>point B</h4>
				<div>
					<label for='eb'>easting</label>
					<input type='text' id='eb', name='eb'>
				</div>
				<div>
					<label for='nb'>northing</label>
					<input type='text' id='nb', name='nb'>
				</div>
				<br>
				<input type="submit" hidden>
			</form>
			<button id='submit'>calculate</button>
		</div>
		<div id='ans'>
			<h3 id='dist'></h3>
			<h3 id='angle'></h3>
		</div>
	</div>
	<script>
		function calcDist(dx, dy, scale){
			return 10**scale*Math.sqrt(dx**2 + dy**2);
		}
		function calcAngle(dx, dy){
			let alpha = Math.atan(dx/dy);
			if(dx>=0){
				if(dy>=0){
					return 3200*alpha/Math.PI;
				} else if(dy<0){
					return 3200*(1+ alpha/Math.PI);
				}
			} else if(dx<0){
				if(dy>=0){
					return 3200*(2+alpha/Math.PI);
				} else if(dy<0){
					return 3200*(1+alpha/Math.PI);
				}
			}
		}
		function readForm(){
			//reads the mgr values
			//console.log($('#ea').val());
			let x1 = parseInt($('#ea').val());
	  		let y1 = parseInt($('#na').val());
	  		let x2 = parseInt($('#eb').val());
	  		let y2 = parseInt($('#nb').val());
	  		//console.log(x1, x2, y1, y2);

	  		//this determines the factor to scale distance by
	  		scale = 5 - x1.toString().length
	  		//console.log(scale);

	  		//calculates and displays distance and azimuth
	    	let d = calcDist(x2-x1, y2-y1, scale);
	    	let a = calcAngle(x2-x1, y2-y1);
	    	$('#dist').text('distance: ' + d);
	    	$('#angle').text('azimuth: ' + a);
		}
		$(document).ready(function(){
		  $("#submit").click(function(){
		  		readForm();
		    });
		});
	</script>
</body>
</html>